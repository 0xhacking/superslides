/*! Superslides - v0.6.0-beta1 - 2013-07-08
* https://github.com/nicinabox/superslides
* Copyright (c) 2013 Nic Aitch; Licensed MIT */
(function(i,t){var n,e="superslides";n=function(n,e){this.options=t.extend({play:!1,animation_speed:600,animation_easing:"swing",animation:"slide",inherit_width_from:i,inherit_height_from:i,pagination:!0,hashchange:!1,scrollable:!0,elements:{preserve:".preserve",nav:".slides-navigation",container:".slides-container",pagination:".slides-pagination"}},e);var o=this,s=t("<div>",{"class":"slides-control"}),a=1;this.$el=t(n),this.$container=this.$el.find(this.options.elements.container);var r=function(){return a=o._findMultiplier(),o._findPositions(),o.$control=o.$container.wrap(s).parent(".slides-control"),o.width=o._findWidth(),o.height=o._findHeight(),c(),h(),l(),d(),o.pagination._setup(),o.$el.on("click",o.options.elements.nav+" a",function(i){i.preventDefault(),o.stop(),t(this).hasClass("next")?o.animate("next"):o.animate("prev")}),t(document).on("keyup",function(i){37===i.keyCode&&o.animate("prev"),39===i.keyCode&&o.animate("next")}),t(i).on("resize",function(){setTimeout(function(){var i=o.$container.children();o.width=o._findWidth(),o.height=o._findHeight(),i.css({width:o.width,left:o.width}),l(),d()},200)}),t(i).on("hashchange",function(){var i,t=o._parseHash();i=t&&!isNaN(t)?o._upcomingSlide(t-1):o._upcomingSlide(t),i>=0&&i!==o.current&&o.animate(i)}),o.pagination._events(),o.start(),o},c=function(){t("body").css({margin:0}),o.$el.css({position:"relative",overflow:"hidden",width:"100%"}),o.$control.css({position:"relative",transform:"translate3d(0)",height:"100%"}),o.$container.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative",height:"100%"}),o.$container.find("img").not(o.options.elements.preserve).css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","z-index":"-1","max-width":"none"}).removeAttr("width").removeAttr("height"),1===o.size()&&o.$el.find(o.options.elements.nav).hide()},h=function(){var i=o.$container.children();i.is("img")&&(i.wrap("<div>"),i.each(function(){var i=t(this).attr("id");t(this).removeAttr("id"),t(this).parent().attr("id",i)}),i=o.$container.children()),i.css({position:"absolute",overflow:"hidden",display:"none",height:"100%",width:o.width,left:2*o.width,top:0,zIndex:0})},d=function(){var i=o.$container.find("img").not(o.options.elements.preserve);i.each(function(){var i=this,t=new Image;t.onload=function(){var t=o.image._aspectRatio(this);o.image._scale(i,t),o.image._center(i,t)},t.src=this.src})},l=function(){t("body").css({margin:0}),o.$el.css({height:o.height}),o.$control.css({width:o.width*a,left:-o.width})},p={slide:function(i,t){var n=o.$container.children(),e=n.eq(i.upcoming_slide);e.css({left:i.upcoming_position,display:"block"}),o.$control.animate({left:i.offset},o.options.animation_speed,o.options.animation_easing,function(){o.size()>1&&(o.$control.css({left:-o.width}),n.eq(i.upcoming_slide).css({left:o.width,zIndex:2}),i.outgoing_slide>=0&&n.eq(i.outgoing_slide).css({left:o.width,display:"none",zIndex:0})),t()})},fade:function(i,t){var n=this,e=n.$container.children(),o=e.eq(i.outgoing_slide),s=e.eq(i.upcoming_slide);s.css({left:this.width,opacity:1,display:"block"}),i.outgoing_slide>=0?o.animate({opacity:0},n.options.animation_speed,n.options.animation_easing,function(){n.size()>1&&(e.eq(i.upcoming_slide).css({zIndex:2}),i.outgoing_slide>=0&&e.eq(i.outgoing_slide).css({opacity:1,display:"none",zIndex:0})),t()}):(s.css({zIndex:2}),t())}},u={_centerY:function(i){var n=t(i);n.css({top:(o.height-n.height())/2})},_centerX:function(i){var n=t(i);n.css({left:(o.width-n.width())/2})},_center:function(i){o.image._centerX(i),o.image._centerY(i)},_aspectRatio:function(i){if(!i.naturalHeight&&!i.naturalWidth){var t=new Image;t.src=i.src,i.naturalHeight=t.height,i.naturalWidth=t.width}return i.naturalHeight/i.naturalWidth},_scale:function(i,n){n=n||o.image._aspectRatio(i);var e=o.height/o.width,s=t(i);e>n?s.css({height:o.height,width:o.height/n}):s.css({height:o.width*n,width:o.width})}},g={_setCurrent:function(i){if(o.$pagination){var t=o.$pagination.children();t.removeClass("current"),t.eq(i).addClass("current")}},_addItem:function(i){var n=i+1,e=n,s=o.$container.children().eq(i),a=s.attr("id");a&&(e=a);var r=t("<a>",{href:"#"+e,text:e});r.appendTo(o.$pagination)},_setup:function(){if(o.options.pagination&&1!==o.size()){var i=t("<nav>",{"class":o.options.elements.pagination.replace(/^\./,"")});o.$pagination=i.appendTo(o.$el);for(var n=0;o.size()>n;n++)o.pagination._addItem(n)}},_events:function(){o.$el.on("click",o.options.elements.pagination+" a",function(i){i.preventDefault();var t=o._parseHash(this.hash),n=o._upcomingSlide(t-1);n!==o.current&&o.animate(n)})}};return this.image=u,this.pagination=g,this.fx=p,this.animation=this.fx[this.options.animation],r()},n.prototype={_findWidth:function(){return t(this.options.inherit_width_from).width()},_findHeight:function(){return t(this.options.inherit_width_from).height()},_findMultiplier:function(){return 1===this.size()?1:3},_upcomingSlide:function(i){if(/next/.test(i))return this._nextInDom();if(/prev/.test(i))return this._prevInDom();if(/\d/.test(i))return+i;if(i&&/\w/.test(i)){var t=this._findSlideById(i);return t>=0?t:0}return 0},_findSlideById:function(i){return this.$container.find("#"+i).index()},_findPositions:function(i,t){t=t||this,void 0===i&&(i=-1),t.current=i,t.next=t._nextInDom(),t.prev=t._prevInDom()},_nextInDom:function(){var i=this.current+1;return i===this.size()&&(i=0),i},_prevInDom:function(){var i=this.current-1;return 0>i&&(i=this.size()-1),i},_parseHash:function(t){return t=t||i.location.hash,t=t.replace(/^#/,""),t&&!isNaN(+t)&&(t=+t),t},size:function(){return this.$container.children().length},destroy:function(){return this.$el.removeData()},update:function(){this._findPositions(this.current),this.$el.trigger("updated.slides")},stop:function(){clearInterval(this.play_id),delete this.play_id,this.$el.trigger("stopped.slides")},start:function(){var n=this;n.options.hashchange?t(i).trigger("hashchange"):this.animate(),this.options.play&&(this.play_id&&this.stop(),this.play_id=setInterval(function(){n.animate()},this.options.play)),this.$el.trigger("started.slides")},animate:function(t,n){var e=this,o={};if(!(this.animating||(this.animating=!0,void 0===t&&(t="next"),o.upcoming_slide=this._upcomingSlide(t),o.upcoming_slide>=this.size()))){if(o.outgoing_slide=this.current,o.upcoming_position=2*this.width,o.offset=-o.upcoming_position,("prev"===t||o.outgoing_slide>t)&&(o.upcoming_position=0,o.offset=0),e.size()>1&&e.pagination._setCurrent(o.upcoming_slide),e.options.hashchange){var s=o.upcoming_slide+1,a=e.$container.children(":eq("+o.upcoming_slide+")").attr("id");i.location.hash=a?a:s}e.$el.trigger("animating.slides",[o]),e.animation(o,function(){e._findPositions(o.upcoming_slide,e),"function"==typeof n&&n(),e.animating=!1,e.$el.trigger("animated.slides"),e.init||(e.$el.trigger("init.slides"),e.init=!0,e.$container.fadeIn("fast"))})}}},t.fn[e]=function(i,o){var s=[];return this.each(function(){var a,r,c;return a=t(this),r=a.data(e),c="object"==typeof i&&i,r||(s=a.data(e,r=new n(this,c))),"string"==typeof i&&(s=r[i],"function"==typeof s)?s=s.call(r,o):void 0}),s},Function.prototype.bind||(Function.prototype.bind=function(){var i=this,t=Array.prototype.slice.call(arguments),n=t.shift();return function(){return i.apply(n,t.concat(Array.prototype.slice.call(arguments)))}})})(this,jQuery);