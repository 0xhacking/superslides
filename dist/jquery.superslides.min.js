/*! Superslides - v0.6.0 - 2013-05-23
* https://github.com/nicinabox/superslides
* Copyright (c) 2013 Nic Aitch; Licensed MIT */
(function(i,t){var n,e="superslides";n=function(n,e){this.options=t.extend({play:!1,animation_speed:600,animation_easing:"swing",animation:"slide",inherit_width_from:i,inherit_height_from:i,pagination:!0,hashchange:!1,scrollable:!0,elements:{preserve:".preserve",nav:".slides-navigation",container:".slides-container",pagination:".slides-pagination"}},e);var s=this,o=t("<div>",{"class":"slides-control"}),a=1;this.$el=t(n),this.$container=this.$el.find(this.options.elements.container),this.animation=this.fx[this.options.animation].bind(this),this.image.scale=this.image.scale.bind(this),this.image.center=this.image.center.bind(this),this.image.centerX=this.image.centerX.bind(this),this.image.centerY=this.image.centerY.bind(this),this.pagination.setup=this.pagination.setup.bind(this),this.pagination.addItem=this.pagination.addItem.bind(this),this.pagination.setCurrent=this.pagination.setCurrent.bind(this),this.pagination.events=this.pagination.events.bind(this);var r=function(){return a=s.findMultiplier(),s.findPositions(),s.$control=s.$container.wrap(o).parent(".slides-control"),s.width=s.findWidth(),s.height=s.findHeight(),h(),c(),p(),d(),s.pagination.setup(),t(document).on("click",s.options.elements.nav+" a",function(i){i.preventDefault(),s.stop(),t(this).hasClass("next")?s.animate("next"):s.animate("prev")}),t(document).on("keyup",function(i){37===i.keyCode&&s.animate("prev"),39===i.keyCode&&s.animate("next")}),t(i).on("resize",function(){setTimeout(function(){var i=s.$container.children();s.width=s.findWidth(),s.height=s.findHeight(),i.css({width:s.width,left:s.width}),p(),d()},200)}),t(i).on("hashchange",function(){var i,t=s.parseHash();i=t&&!isNaN(t)?s.upcomingSlide(t-1):s.upcomingSlide(t),i>=0&&i!==s.current&&s.animate(i)}),s.pagination.events(),s.start(),s},h=function(){t("body").css({margin:0}),s.$el.css({position:"relative",overflow:"hidden",width:"100%"}),s.$control.css({position:"relative",transform:"translate3d(0)",height:"100%"}),s.$container.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative",height:"100%"}),s.$container.find("img").not(s.options.elements.preserve).css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic",position:"absolute",left:"0",top:"0","z-index":"-1","max-width":"none"}).removeAttr("width").removeAttr("height"),1===s.size()&&s.$el.find(s.options.elements.nav).hide()},c=function(){var i=s.$container.children();i.is("img")&&(i.wrap("<div>"),i.each(function(){var i=t(this).attr("id");t(this).removeAttr("id"),t(this).parent().attr("id",i)}),i=s.$container.children()),i.css({position:"absolute",overflow:"hidden",display:"none",height:"100%",width:s.width,left:2*s.width,top:0,zIndex:0})},d=function(){var i=s.$container.find("img").not(s.options.elements.preserve);i.each(function(){s.image.scale(this),s.image.center(this)})},p=function(){t("body").css({margin:0}),s.$el.css({height:s.height}),s.$control.css({width:s.width*a,left:-s.width})};return r()},n.prototype={mobile:/mobile/i.test(navigator.userAgent),findWidth:function(){return t(this.options.inherit_width_from).width()},findHeight:function(){return t(this.options.inherit_width_from).height()},findMultiplier:function(){return 1===this.size()?1:3},upcomingSlide:function(i){if(/next/.test(i))return this.nextInDom();if(/prev/.test(i))return this.prevInDom();if(/\d/.test(i))return+i;if(i&&/\w/.test(i)){var t=this.findSlideById(i);return t>=0?t:0}return 0},findSlideById:function(i){return this.$container.find("#"+i).index()},findPositions:function(i,t){t=t||this,void 0===i&&(i=-1),t.current=i,t.next=t.nextInDom(),t.prev=t.prevInDom()},nextInDom:function(){var i=this.current+1;return i===this.size()&&(i=0),i},prevInDom:function(){var i=this.current-1;return 0>i&&(i=this.size()-1),i},parseHash:function(t){return t=t||i.location.hash,t=t.replace(/^#/,""),t&&!isNaN(+t)&&(t=+t),t},size:function(){return this.$container.children().length},destroy:function(){return this.$el.removeData()},update:function(){this.findPositions(this.current),this.$el.trigger("updated.slides")},stop:function(){clearInterval(this.play_id),delete this.play_id,this.$el.trigger("stopped.slides")},start:function(){var n=this;n.options.hashchange?t(i).trigger("hashchange"):this.animate(),this.options.play&&(this.play_id&&this.stop(),this.play_id=setInterval(function(){n.animate()},this.options.play)),this.$el.trigger("started.slides")},animate:function(t,n){var e=this,s={};if(!(this.animating||(this.animating=!0,void 0===t&&(t="next"),s.upcoming_slide=this.upcomingSlide(t),s.upcoming_slide>=this.size()))){if(s.outgoing_slide=this.current,s.upcoming_position=2*this.width,s.offset=-s.upcoming_position,("prev"===t||s.outgoing_slide>t)&&(s.upcoming_position=0,s.offset=0),e.size()>1&&e.pagination.setCurrent(s.upcoming_slide),e.options.hashchange){var o=s.upcoming_slide+1,a=e.$container.children(":eq("+s.upcoming_slide+")").attr("id");i.location.hash=a?a:o}this.animation(s,function(){e.findPositions(s.upcoming_slide,e),"function"==typeof n&&n(),e.animating=!1,e.init?e.$el.trigger("animated.slides"):(e.init=!0,e.$container.css({display:"block"}))})}}},n.prototype.image={centerY:function(i){var n=t(i);n.css({top:(this.height-n.height())/2})},centerX:function(i){var n=t(i);n.css({left:(this.width-n.width())/2})},center:function(i){this.image.centerX(i),this.image.centerY(i)},aspectRatio:function(i){if(!i.naturalHeight&&!i.naturalWidth){var t=new Image;t.src=i.src,i.naturalHeight=t.height,i.naturalWidth=t.width}return i.naturalHeight/i.naturalWidth},scale:function(i){var n=this.image.aspectRatio(i),e=this.height/this.width,s=t(i);e>n?s.css({height:this.height,width:this.height/n}):s.css({height:this.width*n,width:this.width})}},n.prototype.fx={slide:function(i,t){var n=this,e=n.$container.children(),s=e.eq(i.upcoming_slide);s.css({left:i.upcoming_position,display:"block"}),n.$control.animate({left:i.offset},n.options.animation_speed,n.options.animation_easing,function(){n.size()>1&&(n.$control.css({left:-n.width}),e.eq(i.upcoming_slide).css({left:n.width,zIndex:2}),i.outgoing_slide>=0&&e.eq(i.outgoing_slide).css({left:n.width,display:"none",zIndex:0})),t()})},fade:function(i,t){var n=this,e=n.$container.children(),s=e.eq(i.outgoing_slide),o=e.eq(i.upcoming_slide);o.css({left:this.width,opacity:1,display:"block"}),i.outgoing_slide>=0?s.animate({opacity:0},n.options.animation_speed,n.options.animation_easing,function(){n.size()>1&&(e.eq(i.upcoming_slide).css({zIndex:2}),i.outgoing_slide>=0&&e.eq(i.outgoing_slide).css({opacity:1,display:"none",zIndex:0})),t()}):(o.css({zIndex:2}),t())}},n.prototype.pagination={setCurrent:function(i){var t=this.$pagination.children();t.removeClass("current"),t.eq(i).addClass("current")},addItem:function(i){var n=i+1,e=n,s=this.$container.children().eq(i),o=s.attr("id");o&&(e=o);var a=t("<a>",{href:"#"+e,text:e});a.appendTo(this.$pagination)},setup:function(){if(this.options.pagination&&1!==this.size()){var i=t("<nav>",{"class":this.options.elements.pagination.replace(/^\./,"")});this.$pagination=i.appendTo(this.$el);for(var n=0;this.size()>n;n++)this.pagination.addItem(n)}},events:function(){var i=this;this.options.hashchange||t(document).on("click",i.options.elements.pagination+" a",function(t){t.preventDefault();var n=i.parseHash(this.hash),e=i.upcomingSlide(n-1);e!==i.current&&i.animate(e)})}},t.fn[e]=function(i){return this.each(function(){t.data(this,e)||(t.data(this,e,new n(this,i)),t(this).trigger("init.slides"))})},Function.prototype.bind||(Function.prototype.bind=function(){var i=this,t=Array.prototype.slice.call(arguments),n=t.shift();return function(){return i.apply(n,t.concat(Array.prototype.slice.call(arguments)))}})})(this,jQuery);