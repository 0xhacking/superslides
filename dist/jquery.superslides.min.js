/*! Superslides - v0.5.0 - 2012-12-16
* https://github.com/nicinabox/superslides
* Copyright (c) 2012 Nic Aitch; Licensed MIT */
(function(){var e,t,n;n="superslides",e=jQuery,t=function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=this;return n==null&&(n={}),this.options=e.extend({play:!1,slide_speed:"normal",slide_easing:"linear",pagination:!0,hashchange:!1,scrollable:!0,classes:{preserve:"preserve",nav:"slides-navigation",container:"slides-container",pagination:"slides-pagination"}},n),O=this,u=e(window),this.el=e(t),i=e("."+this.options.classes.container,t),r=i.children(),o=e("<nav>",{"class":this.options.classes.pagination}),s=e("<div>",{"class":"slides-control"}),y=1,v=!1,D=u.width(),d=u.height(),S=["webkit","moz","ms","o"],m=function(){if(v)return;return y=p(),E(),P.mobile=/mobile/i.test(navigator.userAgent),s=i.wrap(s).parent(".slides-control"),L(),k(),M(),a(),P.start(),P},L=function(){return e("body").css({margin:0}),e(t).css({position:"relative",overflowX:"hidden",width:"100%",height:d}),s.css({position:"relative",transform:"translate3d(0)"}),i.css({display:"none",margin:"0",padding:"0",listStyle:"none",position:"relative"}),i.find("img").not("."+P.options.classes.preserve).css({"-webkit-backface-visibility":"hidden","-ms-interpolation-mode":"bicubic","min-width":"100%","min-height":"100%",position:"absolute",left:"0",top:"0","z-index":"-1"})},k=function(){s.css({width:D*y,left:-D});if(P.options.scrollable)return r.each(function(){if(e(".scrollable",this).length)return;return e(this).wrapInner('<div class="scrollable" />'),e(this).find("img:first-child").insertBefore(e(".scrollable",this))})},C=function(){return r.is("img")&&(r.wrap("<div>"),r=i.children()),r.css({display:"none",position:"absolute",overflow:"hidden",top:0,left:D,zIndex:0}),c(r)},M=function(){return P.size()>1?e("."+P.options.classes.nav).show():e("."+P.options.classes.nav).hide()},A=function(){return e("."+P.options.classes.nav+" a").each(function(){return e(this).hasClass("next")?this.hash=O.next:this.hash=O.prev})},f=function(t){return t>=0||(t=P.size()-1),o.append(e("<a>",{href:"#"+t,"class":P.current===o.children().length?"current":void 0}))},a=function(){var n,i;if(!P.options.pagination||P.size()===1)return;return e(t).find("."+P.options.classes.pagination).length?(i=o.children().last().index(),n=r):(i=0,n=new Array(P.size()-i),o=o.appendTo(P.el)),e.each(n,function(e){return f(e)})},g=function(t,n){return e("<img>",{src:t.attr("src")}).load(function(){if(n instanceof Function)return n(this)})},N=function(e){var t;return t=D/e.data("aspect-ratio"),t>=d?e.css({top:-(t-d)/2}):e.css({top:0})},T=function(e){var t;return t=d*e.data("aspect-ratio"),t>=D?e.css({left:-(t-D)/2}):e.css({left:0})},l=function(e){if(!e.data("aspect-ratio")){g(e,function(t){return e.removeAttr("width").removeAttr("height"),e.data("aspect-ratio",t.width/t.height),l(e)});return}return T(e),N(e)},c=function(t){return t.each(function(t){return e(this).width(D).height(d),e(this).css({left:D}),l(e("img",this).not("."+O.options.classes.preserve))})},p=function(){return P.size()===1?1:3},b=function(){var e;return e=P.current+1,e===P.size()&&(e=0),e},x=function(){var e;return e=P.current-1,e<0&&(e=P.size()-1),e},_=function(e){switch(!0){case/next/.test(e):return b();case/prev/.test(e):return x();case/\d/.test(e):return e;default:return!1}},w=function(e){e==null&&(e=window.location.hash),e=e.replace(/^#/,"");if(e)return+e},E=function(e){return e==null&&(e=-1),v&&P.current>=0&&e<0&&(e=P.current),P.current=e,P.next=b(),P.prev=x(),!1},h=function(e,t){var n,u,a,f,l;l=_(e);if(l>P.size()-1)return;a=D*2,n=-a,u=P.current;if(e==="prev"||e<u)a=0,n=0;return f=a,r.removeClass("current").eq(l).addClass("current").css({left:f,display:"block"}),o.children().removeClass("current").eq(l).addClass("current"),s.animate({useTranslate3d:P.mobile,left:n},P.options.slide_speed,P.options.slide_easing,function(){return E(l),P.size()>1&&(s.css({left:-D}),r.eq(l).css({left:D,zIndex:2}),u>0&&r.eq(u).css({left:D,display:"none",zIndex:0})),P.options.hashchange&&(window.location.hash=P.current),typeof t=="function"&&t(),A(),P.animating=!1,v?i.trigger("animated.slides"):(v=!0,i.fadeIn("fast"),i.trigger("init.slides"))})},this.$el=e(t),this.animate=function(e,t){e==null&&(e="next");if(P.animating)return;return P.animating=!0,h(e,t)},this.update=function(){return E(P.current),a(),M(),i.trigger("updated.slides")},this.destroy=function(){return e(t).removeData()},this.size=function(){return i.children().length},this.stop=function(){return clearInterval(P.play_id),delete P.play_id,i.trigger("stopped.slides")},this.start=function(){return C(),P.options.hashchange&&u.trigger("hashchange"),P.animate("next"),P.options.play&&(P.play_id&&P.stop(),P.play_id=setInterval(function(){return P.animate("next")},P.options.play)),i.trigger("started.slides")},u.on("hashchange",function(e){var t;t=w();if(t>=0&&t!==P.current)return P.animate(t)}).on("resize",function(e){return D=u.width(),d=u.height(),k(),c(r)}),e(document).on("click","."+this.options.classes.nav+" a",function(t){return O.options.hashchange||t.preventDefault(),O.stop(),e(this).hasClass("next")?O.animate("next"):O.animate("prev")}).on("click","."+this.options.classes.pagination+" a",function(e){var t;if(!O.options.hashchange)return e.preventDefault(),t=w(this.hash),O.animate(t)}),m()},e.fn[n]=function(r,i){var s;return s=[],this.each(function(){var o,u,a;o=e(this),u=o.data(n),a=typeof r=="object"&&r,u||(s=o.data(n,u=new t(this,a)));if(typeof r=="string"){s=u[r];if(typeof s=="function")return s=s.call(this,i)}}),s}}).call(this);